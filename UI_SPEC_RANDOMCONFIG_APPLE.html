<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CodeMaster - Random Config</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', 'sans-serif'],
                    },
                    colors: {
                        slate: { 50: '#F8F8F8' }
                    },
                    boxShadow: {
                        'apple-subtle': '0 2px 8px rgba(0,0,0,0.04)',
                        'apple-card': '0 4px 12px rgba(0,0,0,0.06)',
                        'apple-glow-blue': '0 4px 12px rgba(0,124,255,0.3)',
                    },
                    animation: {
                        'page-enter': 'slideUpFadeIn 0.5s ease-out forwards',
                    },
                    keyframes: {
                        slideUpFadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <style>
        .glass-nav {
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
        }
        
        .safe-pb {
            padding-bottom: env(safe-area-inset-bottom, 24px);
        }

        /* Checkbox Item Transitions */
        .checkbox-item {
            transition: all 0.3s ease-out;
        }

        /* Button Press Feedback */
        button:active {
            transform: scale(0.95);
            transition: transform 0.15s ease-out;
        }
        button:not(:active) {
            transform: scale(1);
            transition: transform 0.2s ease-out;
        }

        /* Hide default checkbox but keep accessibility */
        .sr-only-checkbox {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen antialiased selection:bg-blue-100">

<div id="app" class="min-h-screen flex flex-col relative">

    <!-- 1. Navigation Bar (Sticky Glassmorphic) -->
    <nav class="fixed top-0 left-0 right-0 z-50 glass-nav border-b border-gray-200/50">
        <div class="max-w-2xl mx-auto px-6 py-4 flex items-center justify-between">
            <!-- Back Button -->
            <button @click="goBack" 
                    class="p-2 -ml-2 rounded-full hover:bg-slate-100/50 transition-colors text-slate-900">
                <i class="ph ph-caret-left text-xl"></i>
            </button>
            
            <!-- Title -->
            <h1 class="text-lg font-semibold text-slate-900">Quelles catégories ?</h1>
            
            <!-- Spacer -->
            <div class="w-10"></div>
        </div>
    </nav>

    <!-- 2. Scrollable Body -->
    <main class="flex-grow pt-24 pb-32 px-6 max-w-2xl mx-auto w-full opacity-0 animate-page-enter">
        
        <!-- Categories List -->
        <div class="space-y-3">
            <label v-for="cat in categories" 
                   :key="cat.id"
                   class="checkbox-item flex items-center gap-4 p-4 rounded-2xl border-2 cursor-pointer select-none group relative overflow-hidden"
                   :class="isSelected(cat) 
                       ? `${getColorTheme(cat.color).bg} ${getColorTheme(cat.color).border} shadow-apple-card` 
                       : 'bg-white border-slate-200/50 hover:border-slate-300 shadow-apple-subtle'">
                
                <!-- Native Checkbox (Hidden) -->
                <input type="checkbox" 
                       :value="cat.label" 
                       v-model="selectedCategories"
                       class="sr-only-checkbox" />

                <!-- Visual Checkbox Indicator -->
                <div class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200"
                     :class="isSelected(cat) 
                        ? `bg-${cat.color}-500 border-${cat.color}-500 scale-110` 
                        : 'border-slate-300 bg-white group-hover:border-slate-400'">
                    <i class="ph-bold ph-check text-white text-xs transition-transform duration-200"
                       :class="isSelected(cat) ? 'scale-100' : 'scale-0'"></i>
                </div>

                <!-- Category Color Badge -->
                <div class="w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 transition-colors duration-200"
                     :class="getColorTheme(cat.color).badgeBg">
                    <i :class="['ph-fill', cat.icon, 'text-lg', getColorTheme(cat.color).badgeText]"></i>
                </div>

                <!-- Label -->
                <span class="font-semibold text-slate-900 flex-1 text-[17px]">
                    {{ cat.label }}
                </span>

                <!-- Active State Overlay (Touch Feedback) -->
                <div class="absolute inset-0 bg-black/5 opacity-0 active:opacity-100 transition-opacity pointer-events-none"></div>
            </label>
        </div>

    </main>

    <!-- 3. Fixed Bottom Action Button -->
    <div class="fixed bottom-0 left-0 right-0 z-50 glass-nav border-t border-white/20 px-6 py-4 pb-safe">
        <div class="max-w-2xl mx-auto">
            <button @click="validateSelection"
                    :disabled="!canValidate"
                    class="w-full rounded-full px-6 py-4 font-semibold text-white text-[17px]
                           bg-blue-600 hover:bg-blue-700
                           disabled:opacity-50 disabled:cursor-not-allowed
                           shadow-apple-glow-blue flex items-center justify-center gap-2 transition-all duration-200">
                <i class="ph-bold ph-check text-xl"></i>
                Valider la sélection
                <span v-if="selectedCategories.length > 0" class="ml-1 px-2 py-0.5 bg-white/20 rounded-full text-xs font-bold">
                    {{ selectedCategories.length }}
                </span>
            </button>
        </div>
    </div>

</div>

<script>
    const { createApp, ref, computed } = Vue;

    createApp({
        setup() {
            // --- Data ---
            // Mapping des couleurs Apple System
            const categories = ref([
                { id: 'info', label: 'Informatique', color: 'blue', icon: 'ph-code' },
                { id: 'math', label: 'Mathématiques', color: 'purple', icon: 'ph-function' },
                { id: 'science', label: 'Science', color: 'green', icon: 'ph-flask' },
                { id: 'philo', label: 'Philosophie', color: 'indigo', icon: 'ph-brain' },
                { id: 'hist', label: 'Histoire', color: 'orange', icon: 'ph-book' },
                { id: 'geo', label: 'Géographie', color: 'cyan', icon: 'ph-globe' },
                { id: 'lit', label: 'Littérature', color: 'pink', icon: 'ph-book-open' },
                { id: 'eco', label: 'Économie', color: 'yellow', icon: 'ph-chart-line' },
                { id: 'chem', label: 'Chimie', color: 'emerald', icon: 'ph-flask' }, // using emerald for teal-ish
                { id: 'bio', label: 'Biologie', color: 'lime', icon: 'ph-plant' },
                { id: 'tech', label: 'Technologie', color: 'slate', icon: 'ph-gear' },
                { id: 'art', label: 'Art', color: 'red', icon: 'ph-paint-brush' }
            ]);

            const selectedCategories = ref([]);

            // --- Computed ---
            const canValidate = computed(() => selectedCategories.value.length > 0);

            // --- Methods ---
            const isSelected = (cat) => selectedCategories.value.includes(cat.label);

            const getColorTheme = (color) => {
                // Mapping des classes Tailwind pour simuler les couleurs système Apple
                // Note: Tailwind v3 colors used for approximation
                const themes = {
                    blue:    { bg: 'bg-blue-50', border: 'border-blue-400', badgeBg: 'bg-blue-100', badgeText: 'text-blue-600' },
                    purple:  { bg: 'bg-purple-50', border: 'border-purple-400', badgeBg: 'bg-purple-100', badgeText: 'text-purple-600' },
                    green:   { bg: 'bg-green-50', border: 'border-green-400', badgeBg: 'bg-green-100', badgeText: 'text-green-600' },
                    indigo:  { bg: 'bg-indigo-50', border: 'border-indigo-400', badgeBg: 'bg-indigo-100', badgeText: 'text-indigo-600' },
                    orange:  { bg: 'bg-orange-50', border: 'border-orange-400', badgeBg: 'bg-orange-100', badgeText: 'text-orange-600' },
                    cyan:    { bg: 'bg-cyan-50', border: 'border-cyan-400', badgeBg: 'bg-cyan-100', badgeText: 'text-cyan-600' },
                    pink:    { bg: 'bg-pink-50', border: 'border-pink-400', badgeBg: 'bg-pink-100', badgeText: 'text-pink-600' },
                    yellow:  { bg: 'bg-yellow-50', border: 'border-yellow-400', badgeBg: 'bg-yellow-100', badgeText: 'text-yellow-600' },
                    emerald: { bg: 'bg-emerald-50', border: 'border-emerald-400', badgeBg: 'bg-emerald-100', badgeText: 'text-emerald-600' },
                    lime:    { bg: 'bg-lime-50', border: 'border-lime-400', badgeBg: 'bg-lime-100', badgeText: 'text-lime-700' },
                    slate:   { bg: 'bg-slate-100', border: 'border-slate-400', badgeBg: 'bg-slate-200', badgeText: 'text-slate-600' },
                    red:     { bg: 'bg-red-50', border: 'border-red-400', badgeBg: 'bg-red-100', badgeText: 'text-red-600' },
                };
                return themes[color] || themes.blue;
            };

            const validateSelection = () => {
                // Simulation navigation
                alert(`Navigation vers la difficulté avec ${selectedCategories.value.length} catégories.`);
                // router.push('/quiz/difficulty')
            };

            const goBack = () => {
                alert("Retour vers Home");
                // router.back()
            };

            return {
                categories,
                selectedCategories,
                canValidate,
                isSelected,
                getColorTheme,
                validateSelection,
                goBack
            };
        }
    }).mount('#app');
</script>

</body>
</html>